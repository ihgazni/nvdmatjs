!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.NVDMATJS=t():n.NVDMATJS=t()}(this,function(){return function(n){var t={};function i(e){if(t[e])return t[e].exports;var r=t[e]={i:e,l:!1,exports:{}};return n[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=n,i.c=t,i.d=function(n,t,e){i.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,t){if(1&t&&(n=i(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)i.d(e,r,function(t){return n[t]}.bind(null,r));return e},i.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(t,"a",t),t},i.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},i.p="",i(i.s=2)}([function(n,t,i){const e=i(1);function r(n){return null===n._pid}function l(n){return null===n._lsibid}function u(n){return null===n._rsibid}function d(n){return null===n._fstchid}function s(n){return null!==n._fstchid&&void 0!==n._fstchid}function o(n){return null!==n._rsibid&&void 0!==n._rsibid}function f(n,t){return null===n?null:e.afindv("_id",n,t)}function c(n){let t={_fstchid:void 0,_lsibid:void 0,_rsibid:void 0,_id:n.currid,_pid:void 0,_depth:0};return n.currid=n.currid+1,t}function p(n){return n._fstchid=null,n}function _(n,t){return f(n._lsibid,t)}function a(n,t){return f(n._rsibid,t)}function b(n,t){let i=[];for(;null!==n&&null!==(n=_(n,t));)i.push(n);return i.reverse(),i}function h(n,t){let i=[];for(;null!==n&&null!==(n=a(n,t));)i.push(n);return i}function g(n,t){let i=b(n,t);return 0===i.length?n:i[0]}function y(n,t){let i=h(n,t),r=0===i.length?n:e.getlstv(i);return r=void 0===r?null:r}function x(n,t){let i=b(n,t),e=h(n,t);return Array.prototype.concat(i,[n],e)}function A(n,t){return f(n._fstchid,t)}function v(n,t,i){if(d(t))return null;{let e=0,r=A(t,i),l=a(r,i);for(;e<n&&null!==l;)l=a(r=l,i),e+=1;return r=e<n?null:r}}function S(n,t){let i=[];if(d(n));else{let e=A(n,t);i.push(e),i=i.concat(h(e,t))}return i}function m(n,t){let i=S(n,t),r=e.getlstv(i);return r=void 0===r?null:r}function L(n,t){return f(g(n,t)._pid,t)}function F(n,t){let i=[],e=L(n,t);for(;null!==e;)i.push(e),e=L(e,t);return i}function R(n,t){let i=F(n,t);return Array.prototype.concat([n],i)}function w(n,t,i){let e=L(t,i),r=0;for(;null!==e&&r<n;)e=L(e,i),r+=1;return e}function N(n,t){let i=o(n);for(;!i&&null!==(n=L(n,t));)i=o(n);return n}function O(n,t){let i=0,e=L(n,t);for(;null!==e;)e=L(e,t),i+=1;return i}function P(n,t){let i=N(n,t);if(null===i)return null;return a(i,t)}function E(n,t){let i=n,e=m(i,t);for(;null!==e;)e=m(i=e,t);return i}function j(n,t){let i,e=A(n,t);return i=null===e?P(n,t):e}function D(n,t,i){let r=F(t,i);return e.afindi("_id",n._id,r)>=0}function I(n,t,i){let r=R(t,i);return e.afindi("_id",n._id,r)>=0}function M(n,t){let i=[],e=n;for(;null!==n&&I(e,n,t);)i.push(n),n=j(n,t);return i}function T(n,t){let i=n-t[0]._depth;return t=t.map(n=>(n._depth=n._depth+i,n))}function C(n){return n._pid=void 0,n}function B(n){return n._lsibid=null,n}function J(n){let t,i;return e.isArray(n)?i=(t=n)[0]:(t=[n],i=n),[t,i]}function q(n){return n._lsibid=null,n._rsibid=null,n._pid=null,n}function U(n){let t=n[0]._depth;return n=n.map(n=>(n._depth=n._depth-t,n))}function $(n,t){let i=M(n,t),r=e.afindi("_id",i[0]._id,t);return[r,r+i.length-1]}function k(n,t){let i,r=A(n,t);if(null!==r){let[l,u]=$(r,t);i=t.slice(l,u+1);let d=a(r,t);null===d?n=p(n):(n._fstchid=d._id,d._pid=n._id,d=B(d)),i=U(i),r=q(r),t=e.secdel(l,u,t)}else i=[];return[t,i]}function G(n,t){let i=L(g(n,t),t);return null===i?[[],t]:k(i,t)}function H(n,t){let i,r=a(n,t);if(null===r)i=[];else{let[l,u]=$(r,t);i=t.slice(l,u+1);let d=a(r,t);null===d?n._rsibid=null:(n._rsibid=d._id,d._lsibid=n._id),i=U(i),r=q(r),t=e.secdel(l,u,t)}return[t,i]}function V(n,t){let i;if(r(n))i=[t,[]];else if(l(n)){i=k(L(n,t),t)}else{i=H(_(n,t),t)}return i}n.exports={isRoot:r,isFstch:function(n){return null===n._lsibid&&null!==n._pid},isFstsib:l,isFstchButNotLstch:function(n){return null!==n._rsibid&&void 0!==n._rsibid&&null===n._lsibid&&null!==n._pid},isFstsibButNotLstsib:function(n){return null!==n._rsibid&&void 0!==n._rsibid&&null===n._lsibid},isLstch:function(n){return null===n._rsibid&&null!==n._pid},isLstsib:u,isLstchButNotFstch:function(n){return null===n._rsibid&&null!==n._lsibid&&void 0!==n._lsibid&&null!==n._pid},isLstsibButNotFstsib:function(n){return null===n._rsibid&&null!==n._lsibid&&void 0!==n._lsibid},isFstchAndLstch:function(n){return null===n._lsibid&&null===n._rsibid&&null!==n._pid},isFstsibAndLstsib:function(n){return null===n._lsibid&&null===n._rsibid},isMidch:function(n){return null!==n._lsibid&&void 0!==n._lsibid&&null!==n._rsibid&&void 0!==n._rsibid&&null!==n._pid},isMidsib:function(n){return null!==n._lsibid&&void 0!==n._lsibid&&null!==n._rsibid&&void 0!==n._rsibid},isLeaf:d,isNonLeaf:s,isUndefined:function(n){return void 0===n._fstchid},havingLsib:function(n){return null!==n._lsibid&&void 0!==n._lsibid},havingRsib:o,idgetnd:f,eq:function(n,t){for(let i in n){if(!1===(n[i]===t[i]))return!1}return!0},newIdPool:function(){return{currid:0}},newNode:c,newRoot:function(n){let t=c(n);return t._lsibid=null,t._rsibid=null,t._pid=null,t._depth=0,t},newFstsib:function(n){let t=c(n);return t._lsibid=null,t},newMidsib:function(n){return c(n)},newLstsib:function(n){let t=c(n);return t._rsibid=null,t},leafize:p,newLeafFstsib:function(n){let t=c(n);return t._lsibid=null,t._fstchid=null,t},newLeafMidsib:function(n){let t=c(n);return t._fstchid=null,t},newLeafLstsib:function(n){let t=c(n);return t._rsibid=null,t._fstchid=null,t},newLeafLonelySib:function(n){let t=c(n);return t._lsibid=null,t._rsibid=null,t._fstchid=null,t},getLsib:_,getRsib:a,getPrecedingSibs:b,getFollowingSibs:h,getFstsib:g,getLstsib:y,getAllSibs:x,getSib:function(n,t,i){return x(t,i)[n]},getFstch:A,getChild:v,getChildren:S,getLstch:m,getParent:L,getAllAnces:F,getAllAncesIncludingSelf:R,getAnces:w,getAncesIncludingSelf:function(n,t,i){return 0===n?t:w(n-1,t,i)},getFstAncesHavingRsibIncludingSelf:N,calcDepth:O,getDepth:function(n,t){return void 0===n._depth?O(n,t):n._depth},getSibseq:function(n,t){return b(n,t).length},getBreadth:function(n,t){let i=b(L(n,t),t).map(n=>S(n,t)),e=Array.prototype.concat(...i),r=b(n,t);return e.length+r.length},getRsibOfFstAncesHavingRsibIncludingSelf:P,getRdmost:E,sdfsNext:j,sdfsPrev:function(n,t){let i,e=_(n,t);return i=null===e?L(n,t):E(e,t)},isAncesOf:D,isDesOf:function(n,t,i){return D(t,n,i)},isAncesOfIncludingSelf:I,isDesOfIncludingSelf:function(n,t,i){return I(t,n,i)},getAllDesesIncludingSelf:M,getAllDeses:function(n,t){let i=M(n,t);return i.shift(),i},getFlatWidth:function(n,t){return M(n,t).filter(d).length},getFlatOffset:function(n,t){let i=t.findIndex(t=>t._id===n._id),e=t.slice(0,i);return(e=e.filter(d)).length},addLsib:function(n,t,i){return r(n)?console.log("rnd  can NOT addLsib"):t=l(n)?function(n,t,i){let[r,l]=J(i);r=T(n._depth,r);let u=L(n,t);u._fstchid=l._id,l._pid=u._id,n._pid=void 0,l._lsibid=null,l._rsibid=n._id,n._lsibid=l._id;let d=e.afindi("_id",n._id,t);return t=e.insertl(d,r,t)}(n,t,i):function(n,t,i){let[r,l]=J(i);r=T(n._depth,r);let u=_(n,t);u._rsibid=l._id,l._lsibid=u._id,n._lsibid=l._id,l._rsibid=n._id,l=C(l);let d=e.afindi("_id",n._id,t);return t=e.insertl(d,r,t)}(n,t,i),t},addRsib:function(n,t,i){return r(n)?(console.log("rnd  can NOT addRsib"),t):t=u(n)?function(n,t,i){let[r,l]=J(i);r=T(n._depth,r),l._lsibid=n._id,n._rsibid=l._id,l=C(l);let u=E(n,t),d=e.afindi("_id",u._id,t);return t=e.insertl(d+1,r,t)}(n,t,i):function(n,t,i){let[r,l]=J(i);r=T(n._depth,r);let u=a(n,t);u._lsibid=l._id,l._rsibid=u._id,n._rsibid=l._id,l._lsibid=n._id,l._rsibid=null,l=C(l);let d=E(n,t),s=e.afindi("_id",d._id,t);return t=e.insertl(s+1,r,t)}(n,t,i)},addFstch:function(n,t,i){let[r,l]=J(i);if(r=T(n._depth+1,r),s(n))return console.log("nonleaf  can NOT addFstch"),t;n._fstchid=l._id,l._pid=n._id,l=B(l);let u=e.afindi("_id",n._id,t);return t=e.insertl(u+1,r,t)},getDesFstiAndLsti:$,rmFstch:k,rmFstsib:G,rmRsib:H,rmLstsib:function(n,t){let i=_(y(n,t),t);return null===i?G(n,t):H(i,t)},rmLsib:function(n,t){let i,r=_(n,t);if(null===r)i=[];else{let[l,u]=$(r,t);i=t.slice(l,u+1);let d=_(r,t);if(null===d){n._lsibid=null,n._pid=r._pid,L(n,t)._fstchid=r._id}else n._lsibid=d._id,d._rsibid=n._id;i=U(i),r=q(r),t=e.secdel(l,u,t)}return[t,i]},rmSelf:V,rmChild:function(n,t,i){let e=v(n,t,i);return null===e?[i,[]]:V(e,i)}}},function(n,t){function i(n){return n.length-1}function e(n){return n[i(n)]}function r(n,t){return n===t||n!=n&&t!=t}function l(n){return Array.isArray(n)||n instanceof Array}function u(n){return"[object Date]"===toString.call(n)}function d(n){return"[object RegExp]"===toString.call(n)}function s(n){return n&&n.window===n}function o(n){return n&&n.$evalAsync&&n.$watch}function f(n){return"function"==typeof n}function c(n){return void 0!==n}function p(){return Object.create(null)}n.exports={deepcopyJSON:function(n){return JSON.parse(JSON.stringify(n))},afindi:function(n,t,i){return i.findIndex(i=>i[n]===t)},afindv:function(n,t,i){return i.find(i=>i[n]===t)},getlsti:i,getlstv:e,getlsta:function(n,t){return e(t)[n]},secdel:function(n,t,i){let e=t-n+1;return i.splice(n,e),i},insert:function(n,t,i){return i.splice(n,0,t),i},insertl:function(n,t,i){return i.splice(n,0,...t),i},norecurEq:function(n,t){for(let i=0;i<n.length;i++){if(!1===(n[k]===t[k]))return!1}return!0},simpleCompare:r,isArray:l,isDate:u,isRegExp:d,isWindow:s,isScope:o,isFunction:f,isDefined:c,createMap:p,equals:function n(t,i){if(t===i)return!0;if(null===t||null===i)return!1;if(t!=t&&i!=i)return!0;var e,_,a,b=typeof t;if(b===typeof i&&"object"===b){if(!l(t)){if(u(t))return!!u(i)&&r(t.getTime(),i.getTime());if(d(t))return!!d(i)&&t.toString()===i.toString();if(o(t)||o(i)||s(t)||s(i)||l(i)||u(i)||d(i))return!1;for(_ in a=p(),t)if("$"!==_.charAt(0)&&!f(t[_])){if(!n(t[_],i[_]))return!1;a[_]=!0}for(_ in i)if(!(_ in a)&&"$"!==_.charAt(0)&&c(i[_])&&!f(i[_]))return!1;return!0}if(!l(i))return!1;if((e=t.length)===i.length){for(_=0;_<e;_++)if(!n(t[_],i[_]))return!1;return!0}}return!1}}},function(n,t,i){const e=i(0);i(3);n.exports={ndfunc:e}},function(n,t,i){const e=i(0),r=i(1),l=e.newIdPool();function u(){let n=e.newRoot(l);return n.text="root",n.expanded=!0,n.display=!1,n.type="root",n}function d(n){let t=e.newLeafLonelySib(l);return t.text=n,t.expanded=!0,t.display=!0,t.type="index",t}function s(){let n=e.newLeafLstsib(l);return n.text="+",n.display=!0,n.type="plus",n}function o(n,t){return e.getRsib(n,t)}function f(n,t,i){e.isFstch(n);let r=d(i);return t=e.addRsib(n,t,r),pairPlusnd=s(),t=e.addRsib(r,t,pairPlusnd),childPlusnd=s(),[t=e.addFstch(r,t,childPlusnd),pairPlusnd,childPlusnd]}function c(n,t,i){let r=[t,null,null];if(e.isRoot(n))console.log("can NOT add more-than-one root!");else{r=f(o(n,t),t,i)}return r}function p(n,t,i){let r=e.getFstch(n,t);return rslt=f(r,t,i),rslt}function _(n,t,i){return"plus"===n.type?f(n,t,i):c(n,t,i)}function a(n,t,i){return"plus"===n.type?(console.log("can NOT add child to plusnd!"),[t,null,null]):p(n,t,i)}function b(n,t){return r.afindv("text",n,t)}function h(n,t){let i=o(n,t),r=e.rmSelf(n,t);return t=r[0],t=(r=e.rmSelf(i,t))[0]}function g(n){return n.forEach(n=>{"plus"===n.type&&(n.display=!0)}),n}function y(n){return n.forEach(n=>{"plus"===n.type&&(n.display=!1)}),n}function x(n,t,i){n.expanded=!1,n.display=!0;let r=e.getAllDeses(n,t);return r=r.map(n=>(n.expanded=!1,n.display=!1,n)),t}function A(n,t,i){n.expanded=!0,n.display=!0;let r=e.getAllDeses(n,t);return r=r.map(n=>("edit"===i&&"index"===n.type?(n.expanded=!0,n.display=!0):"edit"===i&&"plus"===n.type?n.display=!0:"disp"===i&&"index"===n.type?(n.expanded=!0,n.display=!0):n.display=!1,n)),t}function v(n,t,i){return n.expanded=!0,n.display=!0,e.getChildren(n,t).forEach(n=>{"edit"===i&&"index"===n.type?(n.expanded=!0,n.display=!0):"edit"===i&&"plus"===n.type?n.display=!0:"disp"===i&&"index"===n.type?(n.expanded=!0,n.display=!0):n.display=!1}),t}n.exports={newRoot:u,newNode:d,newPlusNode:s,initSdfsel:function(){let n=u(),t=s(),i=[n];return[i=e.addFstch(n,i,t),t]},getPairPlusnd:o,getPairIndexNd:function(n,t){return e.getLsib(n,t)},plusndAddRsib:f,indexndAddRsib:c,indexndAddFstch:p,ndAddRsib:_,ndAddFstch:a,getAllPlusnd:function(n){return n.filter(n=>"plus"===n.type)},getAllIndexNd:function(n){return n.filter(n=>"index"===n.type)},textGetNd:b,textGetSdfsi:function(n,t){return r.afindi("text",n,t)},textAddRsib:function(n,t,i){return _(b(n,t),t,i)},textAddFstch:function(n,t,i){return a(b(n,t),t,i)},ndRmSelf:h,txtRmself:function(n,t){return h(b(n,t),t)},enableEdit:g,disableEdit:y,ndUnexpandAll:x,txtUnexpandAll:function(n,t,i){return x(b(n,t),t)},ndExpandAll:A,txtExpandAll:function(n,t,i){return A(b(n,t),t,i)},ndExpand:v,txtExpand:function(n,t,i){return v(b(n,t),t,i)},rootUnexpandAll:function(n,t){let i=e.getChildren(n[0],n);return i.forEach(t=>{x(t,n)}),"disp"===t?y(i):g(i),n},rootExpandAll:function(n,t){let i=e.getChildren(n[0],n);return i.forEach(i=>{A(i,n,t)}),"disp"===t?y(i):g(i),n},disp:function(n){n.forEach(n=>{n.display&&console.log("    ".repeat(n._depth-1)+n.text)})}}}])});
//# sourceMappingURL=nvdmatjs.js.map